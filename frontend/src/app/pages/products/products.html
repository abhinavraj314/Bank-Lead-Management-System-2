<div class="products-page">
  <div class="page-header">
    <h1 class="page-title">Products</h1>
    <button class="btn btn-primary" (click)="openCreateModal()">Create Product</button>
  </div>

  <div class="table-container">
    <table class="data-table">
      <thead>
        <tr>
          <th>Product Name</th>
          <th>Status</th>
          <th>Created Date</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of products()">
          <td>{{ product.product_name }}</td>
          <td>
            <span class="badge" [class.badge-active]="product.status === 'active'" [class.badge-inactive]="product.status === 'inactive'">
              {{ product.status }}
            </span>
          </td>
          <td>{{ product.created_date }}</td>
        </tr>
        @if (products().length === 0) {
          <tr>
            <td colspan="3" class="empty-state">No products found.</td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  <!-- Create Modal -->
  @if (showCreateModal()) {
    <div class="modal-overlay" (click)="closeCreateModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h2>Create Product</h2>
          <button class="btn-close" (click)="closeCreateModal()">Ã—</button>
        </div>
        <div class="modal-body">
          @if (errorMessage()) {
            <div class="error-message" style="color: #dc3545; padding: 0.5rem; margin-bottom: 1rem; background: #f8d7da; border-radius: 4px;">
              {{ errorMessage() }}
            </div>
          }
          <div class="form-group">
            <label>Product ID <span style="color: red;">*</span></label>
            <input type="text" [(ngModel)]="newProductId" placeholder="e.g., PL, HL" [disabled]="isCreating()" />
          </div>
          <div class="form-group">
            <label>Product Name <span style="color: red;">*</span></label>
            <input type="text" [(ngModel)]="newProductName" placeholder="e.g., Personal Loan, Home Loan" [disabled]="isCreating()" />
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" (click)="closeCreateModal()" [disabled]="isCreating()">Cancel</button>
          <button class="btn btn-primary" (click)="onCreateProduct()" [disabled]="isCreating()">
            {{ isCreating() ? 'Creating...' : 'Create' }}
          </button>
        </div>
      </div>
    </div>
  }
</div>
